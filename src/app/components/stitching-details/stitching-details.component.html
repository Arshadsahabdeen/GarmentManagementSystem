<div class="container">
  <h2>Stitching Details</h2>
  <button class="btn-home" (click)="goHome()">Home</button>

  <form (ngSubmit)="editMode ? updateDetail() : addDetail()" class="material-form">
    <div class="form-row">
      <div class="form-group">
        <label>Material Process ID</label>
        <input type="number" [(ngModel)]="newDetails.Material_Process_Id" name="Material_Process_Id" required />
      </div>
      <div class="form-group">
  <label>Size</label>
  <input type="number" [(ngModel)]="newDetails.Size" name="Size" (ngModelChange)="onSizeChange()" />
</div>
      <div class="form-group">
        <label>Stitching Date</label>
        <input type="date" [(ngModel)]="newDetails.Stitching_Date" name="Stitching_Date" />
      </div>
      <div class="form-group">
  <label>Stitching Status</label>
<select [(ngModel)]="newDetails.Stitching_Status" name="Stitching_Status">
  <option [ngValue]="true">Completed</option>
  <option [ngValue]="false">Pending</option>
</select>

</div>

    </div>

    <div class="form-row">
      <div class="form-group">
  <label>Quantity Stitched</label>
  <input type="number" [(ngModel)]="newDetails.Quantity_Stitched" name="Quantity_Stitched" readonly />
</div>
      <div class="form-group">
        <label>Tailor ID</label>
        <input type="number" [(ngModel)]="newDetails.Tailor_Id" name="Tailor_Id" />
      </div>
      <div class="form-group">
        <label>Quality Check</label>
<select [(ngModel)]="newDetails.Quality_Check_Status" name="Quality_Check_Status">
  <option [ngValue]="true">Passed</option>
  <option [ngValue]="false">Pending</option>
</select>

      </div>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary">
        {{ editMode ? 'Update' : 'Add' }}
      </button>
      <button *ngIf="editMode" type="button" class="btn btn-secondary" (click)="cancelEdit()">Cancel</button>
    </div>
  </form>

  <table class="materials-table" *ngIf="stitchingDetailsList.length > 0">
    <thead>
      <tr>
        <th>ID</th>
        <th>Material Process ID</th>
        <th>Size</th>
        <th>Stitching Date</th>
        <th>Status</th>
        <th>Qty Stitched</th>
        <th>Tailor ID</th>
        <th>Quality Check</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let sd of stitchingDetailsList">
        <td>{{ sd.Stitching_Details_Id }}</td>
        <td>{{ sd.Material_Process_Id }}</td>
        <td>{{ sd.Size }}</td>
        <td>{{ sd.Stitching_Date | date:'yyyy-MM-dd' }}</td>
        <td>{{ sd.Stitching_Status ? 'Yes' : 'No' }}</td>
        <td>{{ sd.Quantity_Stitched }}</td>
        <td>{{ sd.Tailor_Id }}</td>
        <td>{{ sd.Quality_Check_Status ? 'Yes' : 'No' }}</td>
        <td>
          <button class="btn btn-edit" (click)="editDetail(sd)">Edit</button>
          <button class="btn btn-delete" (click)="deleteDetail(sd.Stitching_Details_Id!)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>

  <p *ngIf="stitchingDetailsList.length === 0">No details found.</p>
</div>
